import{i as f,u as y,b as u,r as g,o as U,d as k,e as a,g as n,n as D,t as x,w as c,v as d,h as E}from"./index-modAxk2Q.js";const b="/api/member",I={"Content-Type":"multipart/form-data"},v={async checkUsername(o){const{data:e}=await f.get(`${b}/checkusername/${o}`);return console.log("AUTH GET CHECKUSERNAME",e),e},async create(o){const e=new FormData;e.append("username",o.username),e.append("email",o.email),e.append("password",o.password),e.append("mbti",o.mbti),o.avatar&&e.append("avatar",o.avatar);const{data:i}=await f.post(b,e,I);return console.log("AUTH POST: ",i),i}},T={class:"mt-5 mx-auto",style:{width:"500px"}},V=a("h1",{class:"my-5"},[a("i",{class:"fa-solid fa-user-plus"}),n(" 회원 가입 ")],-1),S={class:"mb-3 mt-3"},A={for:"username",class:"form-label"},C=a("i",{class:"fa-solid fa-user"},null,-1),B=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),n(" 아바타 이미지: ")],-1),H={class:"mb-3 mt-3"},M=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),n(" email ")],-1),N={class:"mb-3"},R=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),n(" 비밀번호: ")],-1),j={class:"mb-3"},P=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),n(" 비밀번호 확인: ")],-1),$={class:"mb-3 mt-3"},z=a("label",{for:"mbti",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),n(" mbti ")],-1),F=["disabled"],G=a("i",{class:"fa-solid fa-user-plus"},null,-1),K={__name:"JoinPage",setup(o){const e=y(),i=u(null),m=u(""),s=g({username:"hong",email:"hong@gmail.com",password:"12",password2:"12",mbti:"eeee",avatar:null}),r=u(!0),_=async()=>{if(!s.username)return alert("사용자 ID를 입력하세요.");r.value=await v.checkUsername(s.username),console.log(r.value,typeof r.value),m.value=r.value?"이미 사용중인 ID입니다.":"사용가능한 ID입니다."},h=()=>{r.value=!0,s.username?m.value="ID 중복 체크를 하셔야 합니다.":m.value=""},w=async()=>{if(s.password!=s.password2)return alert("비밀번호가 일치하지 않습니다.");i.value.files.length>0&&(s.avatar=i.value.files[0]);try{await v.create(s),e.push({name:"home"})}catch(p){console.error(p)}};return(p,t)=>(U(),k("div",T,[V,a("form",{onSubmit:E(w,["prevent"])},[a("div",S,[a("label",A,[C,n(" 사용자 ID : "),a("button",{type:"button",class:"btn btn-success btn-sm py-0 me-2",onClick:_}," ID 중복 확인 "),a("span",{class:D(r.value.value?"text-primary":"text-danger")},x(m.value),3)]),c(a("input",{type:"text",class:"form-control",placeholder:"사용자 ID",id:"username",onInput:h,"onUpdate:modelValue":t[0]||(t[0]=l=>s.username=l)},null,544),[[d,s.username]])]),a("div",null,[B,a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:i,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",H,[M,c(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":t[1]||(t[1]=l=>s.email=l)},null,512),[[d,s.email]])]),a("div",N,[R,c(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":t[2]||(t[2]=l=>s.password=l)},null,512),[[d,s.password]])]),a("div",j,[P,c(a("input",{type:"password",class:"form-control",placeholder:"비밀번호 확인",id:"password2","onUpdate:modelValue":t[3]||(t[3]=l=>s.password2=l)},null,512),[[d,s.password2]])]),a("div",$,[z,c(a("input",{type:"mbti",class:"form-control",placeholder:"eeee",id:"mbti","onUpdate:modelValue":t[4]||(t[4]=l=>s.mbti=l)},null,512),[[d,s.mbti]])]),a("button",{type:"submit",class:"btn btn-primary mt-4",disabled:r.value},[G,n(" 확인 ")],8,F)],32)]))}};export{K as default};
